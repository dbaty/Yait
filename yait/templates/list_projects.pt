<layout metal:use-macro="api.layout">
<metal:breadcrumbs metal:fill-slot="breadcrumbs">
  <li>
    <span class="separator">&rarr;</span>
    <a tal:attributes="href api.route_url('control_panel')">Control panel</a>
  </li>
  <li>
    <span class="separator">&rarr;</span>
    Manage projects
  </li>
</metal:breadcrumbs>

<metal:content metal:fill-slot="content">

<table id="projectListing"
       class="listing">
  <thead>
    <tr>
      <th>Name</th>
      <th>Title</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>
    <tr tal:repeat="project projects"
        tal:attributes="class repeat['project'].odd and 'odd' or 'even'">
      <td>
          <a tal:content="project.name"
             tal:attributes="href api.route_url('project_home', project_name=project.name)"/>
      </td>
      <td tal:content="project.title"/>
      <td class="centered">
        <form class="ninja"
              tal:attributes="action api.route_url('project_delete')"
              onsubmit="return window.confirm('Are you sure?');"
              method="POST">
          <input type="hidden" name="project_id"
                 tal:attributes="value project.id"/>
          <input type="image" width="16" height="16" alt="delete project"
                 tal:attributes="src api.static_url('static/img/delete.png')"/>
        </form>
      </td>
    </tr>
  </tbody>
</table>


<ul id="actions">
  <li tal:define="action_url api.route_url('project_add')">
    <a tal:attributes="href action_url"
       class="noUnderline"
       ><img tal:attributes="src api.static_url('static/img/add.png')"
             width="32" height="32" alt="add a new project"/></a>
    <a tal:attributes="href action_url">add a new project</a>
  </li>
</ul>

</metal:content>
</layout>
