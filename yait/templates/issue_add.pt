<layout metal:use-macro="api.layout">
<metal:breadcrumbs metal:fill-slot="breadcrumbs">
  <li>
    <span class="separator">&rarr;</span>
    <a tal:attributes="href api.route_url('project_home',
                                          project_name=project.name)"
       tal:content="project.title"/>
  </li>
</metal:breadcrumbs>

<metal:content metal:fill-slot="content"
               tal:define="renderField api.form_macros['renderField']">

<form method="post"
      tal:attributes="action api.route_url('issue_add', project_name=project.name)"
      tal:define="field_options {}">

  <fieldset>
    <legend>Add a new issue</legend>
    <metal:field tal:define="field_name 'title';
                             field_options {'size': 60}"
                 metal:use-macro="renderField"/>
    <metal:issue-text-field metal:use-macro="api.form_macros['issue-text-field']"/>
    <metal:link-extra-fieldset metal:use-macro="api.form_macros['link-extra-fieldset']"/>
  </fieldset>

  <metal:issue-extra-fieldset
     metal:use-macro="api.form_macros['issue-extra-fieldset']"/>

  <div class="buttons">
    <button type="submit" class="positive">Add issue</button>
  </div>
</form>

</metal:content>
</layout>
