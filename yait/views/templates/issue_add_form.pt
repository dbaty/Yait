<layout metal:use-macro="api.layout">
<metal:title metal:fill-slot="title">
  &mdash; <span tal:replace="project.title"/>
</metal:title>
<metal:header metal:fill-slot="header">
  &mdash;
  <a tal:attributes="href api.urlOf(project.name)" tal:content="project.title"/>
</metal:header>

<metal:content metal:fill-slot="content"
               tal:define="renderField api.form_macros['renderField']">

<form method="post"
      tal:attributes="action api.urlOf('%s/addIssue' % project.name)"
      tal:define="field_options {}">

  <fieldset>
    <legend>Add a new issue</legend>
    <metal:field tal:define="field_name 'title';
                             field_options dict(size=80)"
                 metal:use-macro="renderField"/>
    <metal:issue-text-field metal:use-macro="api.form_macros['issue-text-field']"/>
    <metal:link-extra-fieldset metal:use-macro="api.form_macros['link-extra-fieldset']"/>
  </fieldset>

  <metal:issue-extra-fieldset
     metal:use-macro="api.form_macros['issue-extra-fieldset']"/>

  <div class="buttons">
    <button type="submit" class="positive">
      <img tal:attributes="src api.urlOf('static/img/tick.png')" alt=""/>
      Add issue
    </button>
  </div>
</form>

</metal:content>
</layout>
